<main class="w-full h-screen flex">

    <!-- Menu Lateral -->
    <div class="largura-menu-laral">

        <!-- Icone Unimed-->
        <div class="formatacao-botao-logo-unimed">
            <img src="assets/imagens/logo-Unimed.svg">
        </div>

        <ul class="modal-icones" *ngIf="b_Mostrar_Modal">

            <li class="li-hospital-icone" (click)="Get_Filtro_Page_Ramais(2)">

                <div class="icone-hospital-formatacao">
                    <img class="icone-hospital "
                        src="assets/imagens/hospital-unimed.svg">
                </div>
                <div class="icone-hospital-texto {{cd_Origem == 2? nm_Text_Orange: ''}}">
                    Hospital Unimed
                </div>
            </li>

            <li class="li-operadora-icone" (click)="Get_Filtro_Page_Ramais(1)">
                <div class="icone-operadora-formatacao">
                    <img class="icone-operadora"
                        src="assets/imagens/operadora.svg">
                </div>
                <div
                    class="icone-operadora-texto {{cd_Origem == 1? nm_Text_Orange: ''}}">
                    Operadora
                </div>
            </li>

            <li class="li-contatos-uteis-icone" (click)="Get_Filtro_Page_Ramais(0)">
                <div class="contatos-uteis-formatacao">
                    <img class="icone-contatos-uteis" src="assets/imagens/contatos-uteis.svg">
                </div>
                <div
                    class="icone-contatos-uteis-texto {{cd_Origem == 0? nm_Text_Orange: ''}}">
                    Contatos úteis
                </div>
            </li>

            <li class="li-filtrar-todos" (click)="Trazer_Todos()">
                <div class="filtrar-todos-formatacao">
                    <img class="icone-filtrar-todos" src="assets/imagens/trazer-todos.svg">
                </div>
                <div class="icone-filtrar-todos-texto">
                    Filtrar todos
                </div>
            </li>
        </ul>
    </div>

    <!-- Listagem dos Ramais com a barra de pesquisa -->

    <div class="body-ramais">

        <!-- barra de pesquisa -->
        <div class="header">

            <!-- Filtro-->
            <div class="filtro" (click)="Mostrar_Modal()">
                <img class="filtro-icone" src="assets/icons/filter-three-lines.svg">
            </div>

            <!-- barra de pesquisa -->
            <ng-container>
                <uni-search-bar class="barra-pesquisa" [control]="modelChanged"></uni-search-bar>
            </ng-container>
        </div>

        <div class="menu-rolagem">

            <div class="formatacao-menu-rolagem">

                <div *ngIf="b_Exibir_Rolagem_Verde_Menu" class="barra-rolagem" [style.transform]="'translate('+ nr_Posicao * 100 +'%)'">
                </div>
                <div class="largura-texto-menu" (click)="nr_Posicao = 0; Get_Filtro_Page_Ramais(2)">
                    <span 
                        class="menu-rolagem {{nr_Posicao == 0?'text-white':'text-black'}}">Hopital Unimed</span>
                </div>
                <div class="largura-texto-menu" (click)="nr_Posicao = 1; Get_Filtro_Page_Ramais(1)">
                    <span
                        class="menu-rolagem {{nr_Posicao == 1?'text-white ':'text-black'}}">Operadora</span>
                </div>
                <div class="largura-texto-menu" (click)="nr_Posicao = 2; Get_Filtro_Page_Ramais(0)">
                    <span
                        class="menu-rolagem {{nr_Posicao == 2?'text-white':'text-black'}}">Contatos úteis</span>
                </div>
                <div class="largura-texto-menu" (click)="nr_Posicao = 3; Trazer_Todos()">
                    <span 
                        class="menu-rolagem {{nr_Posicao == 3?'text-white':'text-black'}}">Trazer tudo</span>
                </div>
            </div>
        </div>

        <div class="rounded-lg">
            <div class="calculo-largura">
                <ul class="ul-formatacao-menu">
                    <li class="li-formatacao-titulo {{documento.nm_Classe}}"
                        *ngFor="let documento of objArrayTitulos">
                        <div>
                            {{documento.nm_titulo}}
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div #listaRamais class="cdk-ramais">
            <cdk-virtual-scroll-viewport class="virtual-scroll" [itemSize]="10" minBufferPx="700" maxBufferPx="700" >

                <div class="virtual-scroll-formatacao"
                (click)="Expandir_Card(pessoa)" *cdkVirtualFor="let pessoa of objArrayRamais">

                    <!-- essa div está estilizando os nomes que estão vindo do cdkVirtualFor -->
                    <div class="formatacao-ramais {{objArrayRamais.length <= 6?'mr-10':''}}" >
                        <!-- circulo com as inicias mobile -->
                        <div class="largura-pessoa">
                            <div
                                class="formatacao-pessoa">
                                <div class="pt-1 md:pt-1 text-center md:text-xl lg:text-2xl lg:pt-1.5 text-white">
                                    {{pessoa.nm_Pessoa | firstLetterName}}
                                </div>
                            </div>
                        </div>
                        <div
                            class="w-11/12 lg:w-full overflow-x-hidden text-sm lg:text-base flex flex-col gap-y-2 my-auto lg:flex-row">

                            <div [title]="pessoa.nm_Pessoa | camelcase"
                                class="lg:pl-4 lg:w-4/12 pl-6 overflow-hidden overflow-ellipsis whitespace-nowrap ">
                                {{pessoa.nm_Pessoa | camelcase}}
                            </div>

                            <ng-container class="items-center" *ngIf="pessoa.open">
                                <span [title]="pessoa.nm_Departamento | camelcase"
                                    class=" pt-2 mt-3 lg:mt-0 md:pt-3 lg:w-3/12 lg:text-center lg:pt-0 overflow-hidden overflow-ellipsis whitespace-nowrap">
                                    <b class="lg:hidden"> Setor:</b>
                                    {{pessoa.nm_Departamento | camelcase}}
                                </span>

                                <div
                                    class="lg:text-center lg:w-2/12 lg:pl-0 lg:whitespace-nowrap overflow-hidden overflow-ellipsis whitespace-nowrap {{pessoa.nr_Ramal == ''? 'justify-items-start': ''}}">
                                    <b class="lg:hidden">Contato(s):</b>
                                    {{pessoa.nr_Ramal}}<br>{{pessoa.nr_Telefone}}
                                </div>

                                <span [title]="pessoa.ds_Email"
                                    class="lg:w-3/12 lg:text-center mb-4.5 overflow-hidden overflow-ellipsis whitespace-nowrap">
                                    <b class="lg:hidden">Email:</b>
                                    {{pessoa.ds_Email}}
                                </span>
                            </ng-container>
                        </div>
                    </div>
                </div>

                <!-- SVG caso não tenha informação -->
                <div *ngIf='objArrayRamais.length == 0'>
                    <div class="mx-auto pt-11 lg:pt-0 w-6/12 h-6/12 lg:w-3/12 lg:h-3/12">
                        <img src="assets/imagens/table-empty-nada-encontrado.svg" alt="">
                    </div>
                    <div class="text-sm text-center mt-4 md:text-lg md:font-normal"> Os contatos não foram
                        encontrados
                    </div>
                </div>
            </cdk-virtual-scroll-viewport>
        </div>
    </div>

    <!-- Modal de Sobreposição -->
    <div class="absolute inset-0 z-0 bg-black opacity-70 xl:hidden cursor-pointer" *ngIf="b_Mostrar_Modal"
        (click)="b_Mostrar_Modal=false">
    </div>

</main>